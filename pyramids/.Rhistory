round_any(87222, 100000)
round_any(87222, 10000)
source('~/Datavis/rcharts_pyramids.R')
t1 <- getAgeTable("US", c(2000, 2005, 2010))
View(`t1`)
max(Male)
max(t1$Male)
round_any(max(t1$Male), 1000000)
round_any(max(t1$Male), 1000000, f = ceiling)
length(max(t1$male))
?prettyNum
round_any(max(t1$Male), 100000, f = ceiling)
source('~/Datavis/rcharts_pyramids_dev.R')
nigeria <- dPyramid("NI", seq(1990, 2050, 10))
source('~/Datavis/rcharts_pyramids_dev.R')
nigeria <- dPyramid("NI", seq(1990, 2050, 10))
nigeria
japan <- dPyramid("JA", seq(1990, 2050, 10))
japan
qatar <- dPyramid("QA", seq(1990, 2050, 10))
qatar
dat <- getAgeTable("QA", seq(1990, 2050, 10))
View(dat)
dat$Male <- -1 * dat$Male
keep <- c("Year", "Age", "Male", "Female", "ord")
dat.sub <- dat[,keep]
dat.melt <- melt(dat.sub,
value.name='Population',
variable.name = 'Gender',
id.vars=c('Age', 'ord', 'Year') )
View(dat.melt)
min(dat.melt$Population)
round_any(min(dat.melt$Population), 100000)
round_any(min(dat.melt$Population), 100000, f = ceiling)
round_any(min(dat.melt$Population), 100000, f = floor)
source('~/Datavis/rcharts_pyramids_dev.R')
qatar <- dPyramid("QA", seq(1990, 2050, 10))
qatar
source('~/Datavis/rcharts_pyramids_dev.R')
qatar <- dPyramid("QA", seq(1990, 2050, 10))
qatar
round_any(min(dat.melt$Population), 10000, f = floor)
qatar$xAxis(overrideMin = -350000)
qatar
source('~/Datavis/rcharts_pyramids.R')
cb <- dPyramid("CB", seq(1974, 1980, 1))
cb
cb <- dPyramid("CB", seq(1974, 1984, 1))
source('~/Datavis/rcharts_pyramids_dev.R')
cb <- dPyramid("CB", seq(1974, 1984, 1))
cb
cn <- dPyramid("CH", seq(1980, 2050, 10), colors = c("red", "yellow"))
cn
cn <- dPyramid("CH", seq(1990, 2050, 10), colors = c("red", "yellow"))
cn
install.packages('devtools')
source('~/Datavis/rcharts_pyramids.R')
h <- hPyramid("QA", 2014, colors = c("ivory", "darkred"))
h
source('~/Datavis/rcharts_pyramids_dev.R')
h <- hPyramid("QA", 2014, colors = c("ivory", "darkred"))
h
source('~/Datavis/rcharts_pyramids_dev.R')
h
h <- hPyramid("QA", 2014, colors = c("ivory", "darkred"))
h
source('~/Datavis/rcharts_pyramids_dev.R')
h <- hPyramid("QA", 2014, colors = c("ivory", "darkred"))
h
source('~/Datavis/rcharts_pyramids_dev.R')
n1 <- nPyramid("US", 2014)
n1
d <- getAgeTable("US", 2014)
dat <- getAgeTable("US", 2014)
dat$Male <- -1 * dat$Male
dat$Age <- factor(dat$Age, levels = rev(dat$Age), labels = rev(dat$Age))
keep <- c("Male", "Female", "Age")
dat.sub <- dat[,keep]
dat.melt <- melt(dat.sub,
value.name='Population',
variable.name = 'Gender',
id.vars='Age' )
sapply(dat.melt, class)
n1 <- nPlot(
y = 'Population',
x = 'Age',
group = 'Gender',
type = 'multiBarHorizontalChart',
data = dat.melt)
n1
source('~/.active-rstudio-document')
n1 <- nPyramid("US", 2014)
n1
source('~/.active-rstudio-document')
n1 <- nPyramid("US", 2014)
n1
View(dat)
View(dat)
dat$Age
dat.sub <- dat.sub[order(-dat.sub$Age)]
dat.sub <- dat.sub[order(-dat.sub$Age),]
View(dat.sub)
source('~/Datavis/rcharts_pyramids_dev.R')
n1 <- nPyramid("US", 2014)
source('~/Datavis/rcharts_pyramids_dev.R')
source('~/Datavis/rcharts_pyramids_dev.R')
n1 <- nPyramid("US", 2014)
n1
dat$Age <- rev(dat$Age)
View(dat)
source('~/Datavis/rcharts_pyramids_dev.R')
source('~/Datavis/rcharts_pyramids_dev.R')
n1 <- nPyramid("US", 2014)
n1
source('~/Datavis/rcharts_pyramids_dev.R')
n1 <- nPyramid("US", 2014)
n1
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014)
n
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014)
n
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014)
source('~/Datavis/rcharts_pyramids_dev.R')
n
dat <- getAgeTable("US", 2014)
dat$Male <- -1 * dat$Male
dat$Age <- rev(dat$Age)
keep <- c("Male", "Female", "Age")
dat.sub <- dat[,keep]
dat.melt <- melt(dat.sub,
value.name='Population',
variable.name = 'Gender',
id.vars='Age' )
dat.melt$Age <- as.character(rev(dat.melt$Age))
View(dat.melt)
dat.melt <- dat.melt[order(-dat.melt$Age)]
class(dat.melt$Age)
dat.melt <- dat.melt[order(-dat.melt$Age), ]
dat.melt <- dat.melt[order(rev(dat.melt$Age), ]
dat.melt <- dat.melt[order(rev(dat.melt$Age)), ]
View(dat.melt)
n1 <- nPlot(
y = 'Population',
x = 'Age',
group = 'Gender',
type = 'multiBarHorizontalChart',
data = dat.melt)
n1
View(dat)
dat <- dat[order(rev(dat$Age))]
dat <- dat[order(rev(dat$Age)), ]
View(dat)
dat <- getAgeTable("US", 2014)
dat$Male <- -1 * dat$Male
dat <- dat[order(rev(dat$ord)), ]
View(dat)
keep <- c("Male", "Female", "Age")
dat.sub <- dat[,keep]
dat.melt <- melt(dat.sub,
value.name='Population',
variable.name = 'Gender',
id.vars='Age' )
n1 <- nPlot(
y = 'Population',
x = 'Age',
group = 'Gender',
type = 'multiBarHorizontalChart',
data = dat.melt)
n1
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014, colors = c("red", "blue"))
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014, colors = c("red", "blue"))
n
h <- hPyramid("US", 2014, colors = c("red", "blue"))
h
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014, colors = c("red", "blue"))
n
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014, colors = c("red", "blue"))
n
source('~/Datavis/rcharts_pyramids_dev.R')
n
n <- nPyramid("US", 2014, colors = c("red", "blue"))
n
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014, colors = c("red", "blue"))
n
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014, colors = c("red", "blue"))
n
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014, colors = c("red", "blue"))
n
?abs
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014, colors = c("red", "blue"))
n
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("US", 2014, colors = c("red", "blue"))
n
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("FR", 2014)
n
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("FR", 2014)
n
source('~/Datavis/rcharts_pyramids_dev.R')
source('~/Datavis/rcharts_pyramids_dev.R')
n <- nPyramid("QA", 2014)
n
u <- uPyramid("US", 2014)
u <- nPyramid("US", 2014)
u
n <- nPyramid("QA", 2014, colors = c("darkred", "ivory"))
n
library(countrycode)
countrycode("United Arab Emirates", "country.name", "fips104")
n <- nPyramid("AE", 2014, colors = c("red", "green"))
n
source('~/Datavis/rcharts_pyramids_dev.R')
u <- nPyramid("US", 2014)
u
source('~/Datavis/rcharts_pyramids_dev.R')
u <- nPyramid("US", 2014)
u
source('~/Datavis/rcharts_pyramids_dev.R')
u <- nPyramid("US", 2014)
u
source('~/Datavis/rcharts_pyramids_dev.R')
u <- nPyramid("US", 2014)
u
source('~/Datavis/rcharts_pyramids_dev.R')
a <- nPyramid("AE", 2014)
a
source('~/Datavis/rcharts_pyramids_dev.R')
d <- dPyramid("US", 2014)
d
source('~/Datavis/rcharts_pyramids_dev.R')
d <- dPyramid("US", 2014)
d
d <- dPyramid("US", 1930)
u <- nPyramid("US", 2014)
u
source('~/Datavis/rcharts_pyramids_dev.R')
u <- nPyramid("US", 2014)
u
q <- nPyramid("QA", 2014)
q
source('~/Datavis/rcharts_pyramids_dev.R')
q <- nPyramid("QA", 2014)
q
d <- dPyramid("JA", seq(1990, 2050, 10), colors = c("red", "blue"))
d
j <- nPyramid("JA", 2050)
j
source('~/Datavis/rcharts_pyramids_dev.R')
g <- nPyramid("GE", 2014, colors = c("red", "black"))
countrycode::countrycode("Germany", "country.name", "fips104")
g <- nPyramid("GM", 2014, colors = c("red", "black"))
g
g <- nPyramid("GM", 2050, colors = c("red", "black"))
g
g1 <- hPyramid("GM", 2050, colors = c("red", "black"))
g1
source('~/Datavis/rcharts_pyramids_dev.R')
g <- nPyramid("GM", 2050, colors = c("red", "black"))
g
i <- nPyramid("IC", 2014)
i <- nPyramid("IC", 2014, colors = c("pink", "purple"))
i
c <- nPyramid("CH", 2014, colors = c("red", "yellow"))
c
u <- nPyramid("US", 2014)
u
u
u <- nPyramid("US", 2014)
u
source('~/Datavis/rcharts_pyramids_dev.R')
u <- nPyramid("US", 2014)
u
source('~/Datavis/rcharts_pyramids_dev.R')
d <- dPyramid("US", 2014)
d
source('~/.active-rstudio-document')
d <- dPyramid("US", 2014)
d
u <- nPyramid("US", 2014)
u
source('~/Datavis/rcharts_pyramids_dev.R')
d <- dPyramid("US", 2014)
d
source('~/Datavis/rcharts_pyramids_dev.R')
d <- dPyramid("US", 2014)
d
dat <- getAgeTable("US", 2014)
dat$Male <- -1 * dat$Male
keep <- c("Year", "Age", "Male", "Female", "ord")
dat.sub <- dat[,keep]
dat.melt <- melt(dat.sub,
value.name='Population',
variable.name = 'Gender',
id.vars=c('Age', 'ord', 'Year') )
View(dat.melt)
?rep
t1 <- rep(c("Male", "Female"), 21)
t1
t1 <- rep(c("Male", "Female"), each = 21)
t1
?data.frame
dput(dat.melt$Population)
dput(dat.melt$Age)
dat <- data.frame(Age = rep(c("0-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34", "35-39", "40-44", "45-49",
"50-54", "55-59", "60-64", "65-69", "70-74", "75-79", "80-84", "85-89", "90-94",
"95-99", "100+"), 2),
Gender = rep(c("Male", "Female"), 21),
Population = c(-10597149, -10463160, -10520040, -10731809,
-11704248, -11162189, -10805435, -9918820,
-10191657, -10316211, -11058480, -10435062,
-8873957, -7237434, -5092364, -3501387, -2375076,
-1408466, -562765, -114047, -13105, 10134157,
10014685, 10072264, 10216850, 11105011,
10763303, 10680178, 9938587, 10328779, 10498065,
11462719, 11048682, 9671602, 8059112, 5962386, 4402017,
3376338, 2420464, 1243054, 350761, 60228))
View(dat)
source('~/Datavis/rcharts_pyramids_dev.R')
d2 <- dPyramid("US", 2014)
d2
source('~/Datavis/rcharts_pyramids_dev.R')
d2 <- dPyramid("US", 2014)
d2
d2 <- dPyramid("US", seq(2014, 2044, 5), colors = c("red", "blue"))
d2
d2 <- dPyramid("US", seq(2014, 2044, 5), colors = c("red", "blue"))
d2
d2 <- dPyramid("US", 2014)
d2
source('~/Datavis/rcharts_pyramids_dev.R')
d2 <- dPyramid("US", 2014)
d2
d2 <- dPyramid("US", seq(2014, 2044, 5), colors = c("red", "blue"))
d2
dat <- data.frame(Age = rep(c("0-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34", "35-39", "40-44", "45-49",
"50-54", "55-59", "60-64", "65-69", "70-74", "75-79", "80-84", "85-89", "90-94",
"95-99", "100+"), 2),
Gender = rep(c("Male", "Female"), each = 21),
Population = c(-10597149, -10463160, -10520040, -10731809,
-11704248, -11162189, -10805435, -9918820,
-10191657, -10316211, -11058480, -10435062,
-8873957, -7237434, -5092364, -3501387, -2375076,
-1408466, -562765, -114047, -13105, 10134157,
10014685, 10072264, 10216850, 11105011,
10763303, 10680178, 9938587, 10328779, 10498065,
11462719, 11048682, 9671602, 8059112, 5962386, 4402017,
3376338, 2420464, 1243054, 350761, 60228),
ord = 1:42)
library(rCharts)
dat <- dat[order(rev(dat$ord)), ]
dat$Population <- dat$Population / 1000000
d1 <- dPlot(
x = "Population",
y = "Age",
groups = "Gender",
data = dat,
type = 'bar')
d1$yAxis(type = "addCategoryAxis", orderRule = "ord")
d1$xAxis(
type = "addMeasureAxis",
outputFormat = "#!
function(d) {
return d3.format(',.1f')(Math.abs(d)) + 'M'
}
!#"
)
d1$legend(
x = 60
, y = 10
, width = 700
, height = 20
, horizontalAlign = "left"
)
#will not work with multiple inline charts on the same page
#however should work fine if using iframes
d1$setTemplate( afterScript =
"
<script>
myChart.axes[0].shapes.selectAll('text').text(function(d){
return Math.abs(d);
})
</script>
")
d1
source('~/Datavis/rcharts_pyramids_dev.R')
d2 <- dPyramid("US", 2014)
d2
d2 <- dPyramid("US", 2014)
source('~/Datavis/rcharts_pyramids_dev.R')
d2 <- dPyramid("US", 2014)
d2 <- dPyramid("US", 2014)
d2
d2 <- dPyramid("US", 2014, colors = c("red", "green"))
d2
d2 <- dPyramid("US", c(2014, 2015, 2016), colors = c("red", "green"))
d2
source('~/Datavis/rcharts_pyramids_dev.R')
d2 <- dPyramid("US", c(2014, 2015, 2016), colors = c("red", "green"))
d2
d2 <- dPyramid("US", c(2014, 2015, 2016), colors = c("red", "green"))
source('~/Datavis/rcharts_pyramids_dev.R')
d2 <- dPyramid("US", c(2014, 2015, 2016), colors = c("red", "green"))
d2
c1 <- dPyramid("CB", seq(1974, 1984, 1))
c1
c1
source('~/Datavis/rcharts_pyramids_dev.R')
d1 <- dPyramid("US", 2014)
d1
source('~/Datavis/rcharts_pyramids_dev.R')
d1 <- dPyramid("US", seq(2015, 2020, 2025, 2030))
d1 <- dPyramid("US", c(2015, 2020, 2025, 2030))
d1
source('~/Datavis/rcharts_pyramids_dev.R')
d1 <- dPyramid("US", c(2015, 2020, 2025, 2030))
d1
source('~/Datavis/rcharts_pyramids_dev.R')
c <- dPyramid("CB", seq(1974, 1981, 1))
c
source('~/Datavis/rcharts_pyramids_dev.R')
i1 <- dPyramid("IN", seq(1990, 2050, 10), colors = c("orange", "green"))
i1 <- dPyramid("IN", seq(1994, 2044, 10), colors = c("orange", "green"))
q1 <- dPyramid("QA", seq(1994, 2044, 10), colors = c("darkred", "silver"))
q1
i1
source('~/Datavis/rcharts_pyramids_dev.R')
i1 <- dPyramid("IN", seq(1994, 2044, 10), colors = c("orange", "green"))
q1 <- dPyramid("QA", seq(1994, 2044, 10), colors = c("darkred", "silver"))
q1
i1
c1 <- dPyramid("CH", seq(1990, 2050, 10), colors = c("yellow", "red"))
c1
c2 <- nPyramid("CH", 2044)
c2
c2 <- nPyramid("CH", 2044, colors = c("yellow", red))
c2 <- nPyramid("CH", 2044, colors = c("yellow", "red"))
c2
source('~/Datavis/rcharts_pyramids_dev.R')
g <- dPyramid("GM", seq(2010, 2050, 10), colors = c("black", "red"))
g
i <- dPyramid("IT", seq(2010, 2050, 10), colors = c("blue", "green"))
i
source('~/Datavis/rcharts_pyramids_dev.R')
i <- dPyramid("IT", seq(1994, 2044, 10), colors = c("red", "green"))
i
source('~/Datavis/rcharts_pyramids_dev.R')
i <- dPyramid("IT", seq(1994, 2044, 10), colors = c("red", "green"))
i
uae <- dPyramid("AE", seq(2004, 2044, 10))
uae
uae <- dPyramid("AE", seq(1984, 2044, 10))
uae <- dPyramid("AE", seq(1994, 2044, 10))
uae
source('~/Datavis/rcharts_pyramids_dev.R')
g <- hPyramid("GR", 2014)
g
install.packages('GGally')
library(devtools)
install_github('ramnathv/rCharts@dev')
source('~/Datavis/rcharts_pyramids_dev.R')
i <- dPyramid("IT", seq(2000, 2050, 10), colors = c("green", "red"))
i
source('~/Datavis/rcharts_pyramids_dev.R')
g <- nPyramid("GM", 2014, colors = c("black", "red"))
g
q <- nPyramid("QA", 2014, colors = c("darkred", "silver"))
q
q <- nPyramid("QA", 2014, colors = c("darkred", "silver"))
q
source('~/Datavis/rcharts_pyramids_dev.R')
q <- nPyramid("QA", 2014, colors = c("darkred", "silver"))
q
source('~/Datavis/rcharts_pyramids_dev.R')
q <- nPyramid("QA", 2014, colors = c("darkred", "silver"))
q
g2 <- dPyramid("GM", seq(1994, 2044, 10), colors = c("black", "red"))
g2
source('~/GitHub/teaching-with-datavis/pyramids/rcharts_pyramids.R')
d <- dPyramid("DK", seq(2000, 2050, 10))
d <- dPyramid("DK", seq(2000, 2050, 10))
d <- dPyramid("DE", seq(2000, 2050, 10))
d <- dPyramid("DA", seq(2000, 2050, 10), colors = c("red", "ivory"))
d
install.packages(c('XML', 'reshape2', 'devtools', 'plyr'))
library(devtools)
install_github('ramnathv/rCharts@dev')
source('https://raw.githubusercontent.com/walkerke/teaching-with-datavis/master/pyramids/rcharts_pyramids.R')
source('~/GitHub/teaching-with-datavis/pyramids/rcharts_pyramids.R')
n1 <- nPyramid('QA', 2014, colors = c('darkred', 'silver'))
setwd("~/GitHub/teaching-with-datavis/pyramids")
n1$save('qatar.html', cdn = TRUE)
h1 <- hPyramid('JA', 2050, colors = c('blue', 'red'))
h1$save('japan2050.html', cdn = TRUE)
d1 <- dPyramid('GM', seq(2000, 2050, 10), colors = c('black', 'red'))
d1
d1$save('germany.html', cdn = TRUE)
d2 <- dPyramid('CB', seq(1974, 1982, 1))
d2
d2$save('cambodia.html', cdn = TRUE)
